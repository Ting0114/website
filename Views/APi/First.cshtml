
@{
    ViewData["Title"] = "First";
}

<h1>First Ajax Demo</h1>

<button id="buttonStart" class="btn btn-primary">Ajax開始</button>
<div id="div1"></div>
@section Styles{
    <style>

    </style>
}
@section Scripts{
    <script>
        const btn = document.querySelector(`#buttonStart`);
        const myDiv = document.querySelector(`#div1`);
        btn.addEventListener(`click`,()=>{
            fetch(`@Url.Content("~/api/index")`)
            .then(response =>{
                console.log(response);
                response.headers.forEach((value, name)=>{
                    console.log(`${name}:${value}`)
                })
                return response.text();
            })
            .then(data=>{
                    myDiv.innerHTML = `<h2>${data}</h2> `;
            })
        })
    </script>
}